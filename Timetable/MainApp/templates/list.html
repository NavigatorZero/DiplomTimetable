<div class="test">
    {% block title %}Вложенный титл{% endblock %}
    {% block content %}
    <div class="row">
        <div class="form-group col-l2">

            <label>Выберите дату занятий</label>
            <input type="date" id="raspDate" class="date">
            <button id="raspDateButton" class="btn btn-success"> отправить</button>

            <form action="{%url 'Main_list' %}" method="post">
                {% csrf_token %}
                <button type="submit" name="erase" id="erase">Стереть расписание</button>
                <button type="submit" name="fill" id="fill">Составить расписание</button>
            </form>
            <label for="inputState">Выберите Дату</label>

        </div>
    </div>
    <h1>Расписнание на </h1>


    <table class="table">
        <thead>
        <tr>
            <th> Номер пары</th>
            <th>
                Предмет
            </th>
            <th>
                Преподователь
            </th>
            <th>
                Тип занятия
            </th>
            <th>Аудитория</th>
            <th>Время</th>
        </tr>
        </thead>
        <tbody>
        {% for post in posts %}
        <tr>
            <td>{{post.NLecii}}</td>
            <td>{{post.Predmet }}</td>
            <td>{{post.Prepod}}</td>
            <td>{{post.Podgruppa}}</td>
            <td>{{post.Auditoriya }}</td>
            <td>{{post.vremya |date:"d-m-Y"}}</td>
            {% endfor %}
        </tr>
        </tbody>
    </table>
    <script>
        $(document).ready(function () {
            var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();

            function csrfSafeMethod(method) {
                // these HTTP methods do not require CSRF protection
                return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
            }

            $("#raspDateButton").click(function () {
                $.ajax({
                    method: "POST",
                    url: "{%url 'Main_list'%}",
                    dataType: "text",
                    data: {
                        "scheduleDay": $("#raspDate").val(),
                    },
                    beforeSend: function (xhr, settings) {
                        // if not safe, set csrftoken
                        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                            xhr.setRequestHeader("X-CSRFToken", csrftoken);
                        }
                    },
                    success: function (data) {
                        $(".test").html(data);
                        console.log('ssucces')
                    },
                    error: function (er) {
                        console.log(er);
                    }
                });
            });

        });

    </script>
    {% endblock %}
</div>